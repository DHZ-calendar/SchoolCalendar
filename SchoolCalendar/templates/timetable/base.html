{% load i18n %}
{% load static %}

{% load is_adminschool %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{% trans 'SchoolCalendar' %}</title>
    <link rel="shortcut icon" href="{% static 'favicon.ico' %}" />

    <!-- Bootstrap 4 -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>

    <!-- Include Bootstrap Datepicker -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.8.0/css/bootstrap-datepicker.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.8.0/js/bootstrap-datepicker.min.js"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-timepicker/0.5.2/css/bootstrap-timepicker.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-timepicker/0.5.2/js/bootstrap-timepicker.min.js"></script>

    <link rel="stylesheet" href="{% static 'sidebar.css' %}" />

    {% block head %}
    {% endblock %}

    <style>
        {% block style %}    
        {% endblock %}
    </style>
</head>
<body>
    <nav id="sidebar">
        <div class="sidebar-header">
            <div id="dismiss">
                X
            </div>
            <h3>
                School Calendar
                <img width="40" src="{% static 'logo.png' %}" />
            </h3>
        </div>

        <ul class="list-unstyled components">
            <span class="username">
                {{ user.get_full_name }}
                <svg class="bi bi-person-circle" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path d="M13.468 12.37C12.758 11.226 11.195 10 8 10s-4.757 1.225-5.468 2.37A6.987 6.987 0 0 0 8 15a6.987 6.987 0 0 0 5.468-2.63z"/>
                    <path fill-rule="evenodd" d="M8 9a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/>
                    <path fill-rule="evenodd" d="M8 1a7 7 0 1 0 0 14A7 7 0 0 0 8 1zM0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8z"/>
                </svg>
            </span>
            <a href="{% url 'logout' %}" class="btn btn-primary btn-sm active float-right" role="button">{% trans 'Logout' %}</a>

            <li class="mt-3">
                <a href="{% url 'timetable-view' %}">
                    <svg class="bi bi-calendar3" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" d="M14 0H2a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zM1 3.857C1 3.384 1.448 3 2 3h12c.552 0 1 .384 1 .857v10.286c0 .473-.448.857-1 .857H2c-.552 0-1-.384-1-.857V3.857z"/>
                        <path fill-rule="evenodd" d="M6.5 7a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm-9 3a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm-9 3a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/>
                    </svg>
                    {% trans 'Timetable' %}
                </a>
            </li>
            {% if user|is_adminschool %}
            <li>
                <a href="{% url 'substitute_teacher-view' %}">
                    <svg class="bi bi-arrow-left-right" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" d="M10.146 7.646a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L12.793 11l-2.647-2.646a.5.5 0 0 1 0-.708z"/>
                        <path fill-rule="evenodd" d="M2 11a.5.5 0 0 1 .5-.5H13a.5.5 0 0 1 0 1H2.5A.5.5 0 0 1 2 11zm3.854-9.354a.5.5 0 0 1 0 .708L3.207 5l2.647 2.646a.5.5 0 1 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 0 1 .708 0z"/>
                        <path fill-rule="evenodd" d="M2.5 5a.5.5 0 0 1 .5-.5h10.5a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z"/>
                    </svg>
                    {% trans 'Substitute a teacher' %}
                </a>
            </li>
            <li>
                <a href="{% url 'teacher_report-view' %}">
                    <svg class="bi bi-file-ruled" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" d="M4 1h8a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2zm0 1a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1H4z"/>
                        <path fill-rule="evenodd" d="M13 6H3V5h10v1zm0 3H3V8h10v1zm0 3H3v-1h10v1z"/>
                        <path fill-rule="evenodd" d="M5 14V6h1v8H5z"/>
                    </svg>
                    {% trans 'Teachers report' %}
                </a>
            </li>
            <li>
                <a href="#adminSubmenu" data-toggle="collapse" aria-expanded="false">+ Admin</a>
                <ul class="collapse list-unstyled" id="adminSubmenu">
                    <li>
                        <a href="{% url 'teacher-listview' %}">{% trans 'Teachers' %}</a>
                    </li>
                    <li>
                        <a href="{% url 'absenceblock-listview' %}">{% trans 'Absence blocks' %}</a>
                    </li>
                    <li>
                        <a href="{% url 'course-listview' %}">{% trans 'Courses' %}</a>
                    </li>
                    <li>
                        <a href="{% url 'room-listview' %}">{% trans 'Rooms' %}</a>
                    </li>
                    <li>
                        <a href="{% url 'hours_per_teacher_in_class-listview' %}">{% trans 'Hours per teacher' %}</a>
                    </li>
                    <li>
                        <a href="{% url 'hourslot-listview' %}">{% trans 'Hour-slots' %}</a>
                    </li>
                    <li>
                        <a href="{% url 'holiday-listview' %}">{% trans 'Holidays' %}</a>
                    </li>
                    <li>
                        <a href="{% url 'stage-listview' %}">{% trans 'Stages' %}</a>
                    </li>
                    <li>
                        <a href="{% url 'subject-listview' %}">{% trans 'Subjects' %}</a>
                    </li>
                    
                </ul>
            </li>
            {% endif %}
            {% if user.is_superuser %}
            <li>
                <a href="#superadminSubmenu" data-toggle="collapse" aria-expanded="false">+ Super Admin</a>
                <ul class="collapse list-unstyled" id="superadminSubmenu">
                    <li>
                        <a href="{% url 'school_year-listview' %}">{% trans 'School years' %}</a>
                    </li>
                    <li>
                        <a href="{% url 'school-listview' %}">{% trans 'Schools' %}</a>
                    </li>
                    <li>
                        <a href="{% url 'adminschool-listview' %}">{% trans 'School admins' %}</a>
                    </li>
                </ul>
            </li>
            {% endif %}
            <li class="mt-3">
                <a href="{% url 'password_change' %}" class="btn btn-outline-primary btn-sm active" role="button">
                    {% trans 'Change password' %}
                </a>
            </li>
        </ul>
    </nav>

    <button type="button" id="sidebarCollapse" class="btn">
        <span>&#9776; {% trans 'Menu' %}</span>
    </button>

    <div id="loading" class="text-center" style="position: fixed;z-index: 200;width: 100vw;height: 100vh;left: 0;background-color: white; opacity: 0.8;">
        <img src="{% static 'loading.gif' %}" />
    </div>

    <!-- Dark Overlay element -->
    <div class="overlay"></div>

    <script>
    $(document).ready(() => {
        $('#dismiss, .overlay').on('click', function () {
            $('#sidebar').removeClass('active');
            $('.overlay').removeClass('active');
        });

        $('#sidebarCollapse').on('click', function () {
            $('#sidebar').addClass('active');
            $('.overlay').addClass('active');
            $('.collapse.in').toggleClass('in');
            $('a[aria-expanded=true]').attr('aria-expanded', 'false');
        });
    });

    var $loading = $('#loading').hide();
    $(document)
    .ajaxStart(function () {
        $loading.show();
    })
    .ajaxStop(function () {
        $loading.hide();
    });
    </script>

    {% block body %}
    {% endblock %}


    <script>
        {% block script %}
        {% endblock %}
    </script>
</body>
</html>