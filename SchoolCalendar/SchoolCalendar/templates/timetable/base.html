{% load i18n %}
{% load static %}

{% load is_adminschool %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{% trans 'SchoolCalendar' %}</title>

    <!-- Bootstrap 4 -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>

    <!-- Include Bootstrap Datepicker -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.8.0/css/bootstrap-datepicker.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.8.0/js/bootstrap-datepicker.min.js"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-timepicker/0.5.2/css/bootstrap-timepicker.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-timepicker/0.5.2/js/bootstrap-timepicker.min.js"></script>

    <link rel="stylesheet" href="{% static 'sidebar.css' %}" />

    {% block head %}
    {% endblock %}

    <style>
        {% block style %}    
        {% endblock %}
    </style>
</head>
<body>
    <nav id="sidebar">
        <div class="sidebar-header">
            <div id="dismiss">
                X
            </div>
            <h3>School Calendar</h3>
        </div>

        <ul class="list-unstyled components">
            <span class="username">{{ user.get_full_name }}</span>
            <a href="{% url 'logout' %}" class="btn btn-primary btn-sm active float-right" role="button">{% trans 'Logout' %}</a>

            <li>
                <a href="{% url 'timetable-view' %}">{% trans 'Timetable' %}</a>
            </li>
            {% if user|is_adminschool %}
            <li>
                <a href="{% url 'substitute_teacher-view' %}">{% trans 'Substitute a teacher' %}</a>
            </li>
            <li>
                <a href="#adminSubmenu" data-toggle="collapse" aria-expanded="false">+ Admin</a>
                <ul class="collapse list-unstyled" id="adminSubmenu">
                    <li>
                        <a href="{% url 'teacher-add' %}">{% trans 'Add teacher' %}</a>
                    </li>
                    <li>
                        <a href="{% url 'absenceblock-add' %}">{% trans 'Add absence block' %}</a>
                    </li>
                    <li>
                        <a href="{% url 'course-add' %}">{% trans 'Add course' %}</a>
                    </li>
                    <li>
                        <a href="{% url 'hours_per_teacher_in_class-add' %}">{% trans 'Add hours per teacher' %}</a>
                    </li>
                    <li>
                        <a href="{% url 'hourslot-add' %}">{% trans 'Add hour-slot' %}</a>
                    </li>
                    <li>
                        <a href="{% url 'holiday-add' %}">{% trans 'Add holiday' %}</a>
                    </li>
                    <li>
                        <a href="{% url 'stage-add' %}">{% trans 'Add stage' %}</a>
                    </li>
                    <li>
                        <a href="{% url 'subject-add' %}">{% trans 'Add subject' %}</a>
                    </li>
                    
                </ul>
            </li>
            {% endif %}
            {% if user.is_superuser %}
            <li>
                <a href="#superadminSubmenu" data-toggle="collapse" aria-expanded="false">+ Super Admin</a>
                <ul class="collapse list-unstyled" id="superadminSubmenu">
                    <li>
                        <a href="{% url 'school_year-add' %}">{% trans 'Add new year' %}</a>
                    </li>
                    <li>
                        <a href="{% url 'school-add' %}">{% trans 'Add school' %}</a>
                    </li>
                    <li>
                        <a href="{% url 'adminschool-add' %}">{% trans 'Add school admin' %}</a>
                    </li>
                </ul>
            </li>
            {% endif %}
        </ul>
    </nav>

    <button type="button" id="sidebarCollapse" class="btn">
        <span>&#9776; {% trans 'Menu' %}</span>
    </button>

    <div id="loading" class="text-center" style="position: fixed;z-index: 200;width: 100vw;height: 100vh;left: 0;background-color: white; opacity: 0.8;">
        <img src="{% static 'loading.gif' %}" />
    </div>

    <script>
    $(document).ready(() => {
        $('#dismiss, .overlay').on('click', function () {
            $('#sidebar').removeClass('active');
            $('.overlay').removeClass('active');
        });

        $('#sidebarCollapse').on('click', function () {
            $('#sidebar').addClass('active');
            $('.overlay').addClass('active');
            $('.collapse.in').toggleClass('in');
            $('a[aria-expanded=true]').attr('aria-expanded', 'false');
        });
    });

    var $loading = $('#loading').hide();
    $(document)
    .ajaxStart(function () {
        $loading.show();
    })
    .ajaxStop(function () {
        $loading.hide();
    });
    </script>

    {% block body %}
    {% endblock %}


    <script>
        {% block script %}
        {% endblock %}
    </script>
</body>
</html>